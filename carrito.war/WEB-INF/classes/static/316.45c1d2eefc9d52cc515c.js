"use strict";(self.webpackChunkpruebas=self.webpackChunkpruebas||[]).push([[316],{316:(X,u,i)=>{i.r(u),i.d(u,{CategoriaModule:()=>$});var l=i(8583),f=i(4655),s=i(2789),d=i(4457),r=i(3679),h=i(5385),p=i(5868),t=i(7716),A=i(6223),N=i(9866),y=i(9344),U=i(6095),S=i(5540),E=i(1384),C=i(5618),m=i(8295),Z=i(9983),v=i(7441),T=i(1095),Y=i(2458),b=i(6627);function J(e,n){if(1&e&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.Q6J("value",o.codigo),t.xp6(1),t.hij(" ",o.nombre," ")}}function j(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){return t.CHM(o),t.oxw().onEliminar()}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA(),t.qZA()}}function D(e,n){1&e&&(t.TgZ(0,"th",25),t._uU(1," Codigo "),t.qZA())}function Q(e,n){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.codigo," ")}}function M(e,n){1&e&&(t.TgZ(0,"th",25),t._uU(1," Categoria "),t.qZA())}function w(e,n){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.nombre," ")}}function F(e,n){1&e&&(t.TgZ(0,"th",25),t._uU(1," Estado "),t.qZA())}function z(e,n){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.estado.nombre," ")}}function B(e,n){1&e&&(t.TgZ(0,"th",25),t._uU(1," Editar "),t.qZA())}function H(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"td",26),t.TgZ(1,"div",27),t.TgZ(2,"button",28),t.NdJ("click",function(){const g=t.CHM(o).$implicit;return t.oxw().onEditarClick(g)}),t.TgZ(3,"mat-icon"),t._uU(4,"edit"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}function I(e,n){1&e&&t._UZ(0,"tr",29)}function R(e,n){1&e&&t._UZ(0,"tr",30)}const q=function(){return[5,10,20]},G=[{path:"",component:(()=>{class e{constructor(o,a,c,g,x,k){this.fb=o,this.categoriaService=a,this.spinner=c,this.toastr=g,this.estadoService=x,this.rutaService=k,this.editar=!1,this.mensajeSatisfactorio="Satisfactorio",this.displayedColumns=["codigo","categoria","estado","editar"],this.dataSource=new s.by([]),this.rutaService.banner.emit(!1)}ngOnInit(){this.initForm(),this.buscar(),this.listarEstado()}initForm(){this.form=this.fb.group({nombre:new r.NI("",r.kI.required),estado:new r.NI("",r.kI.required),codigo:new r.NI("")})}clickEnviar(){let o=new h.E,a=new p.G;this.spinner.show(),o.codigo=this.form.get("codigo").value,o.nombre=this.form.get("nombre").value,a.codigo=this.form.get("estado").value,o.estado=a,console.log(o),this.editar?this.actualizar(o):this.registrar(o)}onCancelar(){this.form.reset(),this.editar=!1}onEliminar(){let o=new h.E,a=new p.G;this.spinner.show(),o.codigo=this.form.get("codigo").value,o.nombre=this.form.get("nombre").value,a.codigo=this.form.get("estado").value,o.estado=a,this.spinner.show(),this.categoriaService.eliminar(o).subscribe(c=>{this.spinner.hide(),this.toastr.success(this.mensajeSatisfactorio),this.form.reset(),this.editar=!1,this.buscar()},c=>this.mensajeError(c))}registrar(o){this.categoriaService.crear(o).subscribe(a=>{this.spinner.hide(),this.toastr.success(this.mensajeSatisfactorio),this.form.reset(),this.buscar()},a=>this.mensajeError(a))}actualizar(o){this.categoriaService.editar(o).subscribe(a=>{this.spinner.hide(),this.toastr.success(this.mensajeSatisfactorio),this.form.reset(),this.buscar()},a=>this.mensajeError(a))}buscar(){this.categoriaService.buscarAdmin().subscribe(o=>{this.dataSource=new s.by(o),this.paginator.firstPage(),this.dataSource.paginator=this.paginator})}mensajeError(o){this.spinner.hide(),console.log(o),this.toastr.error("Ha ocurrido un problema ")}listarEstado(){this.estadoService.buscarTodo().subscribe(o=>{this.lstEstCodigo=o})}onEditarClick(o){this.editar=!0,this.form.get("codigo").setValue(o.codigo),this.form.get("estado").setValue(o.estado.codigo),this.form.get("nombre").setValue(o.nombre),this.estudiante=o.codigo}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(r.qu),t.Y36(A.n),t.Y36(N.t2),t.Y36(y._W),t.Y36(U.s),t.Y36(S.z))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-categoria"]],viewQuery:function(o,a){if(1&o&&t.Gf(d.NW,5),2&o){let c;t.iGM(c=t.CRH())&&(a.paginator=c.first)}},decls:43,vars:10,consts:[[2,"margin-top","10%"],[3,"formGroup"],["fxLayout","row","fxLayoutAlign","space-evenly center"],["matInput","","formControlName","nombre","maxlength","45","placeholder","Name"],["message",""],["align","end"],["formControlName","estado"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","center center"],["mat-raised-button","",3,"disabled","click"],["mat-raised-button","",3,"click"],["class","boton",3,"click",4,"ngIf"],[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","codigo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","categoria"],["matColumnDef","estado"],["matColumnDef","editar"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],[3,"value"],[1,"boton",3,"click"],["mat-header-cell",""],["mat-cell",""],[1,"example-button-container"],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,a){if(1&o&&(t._UZ(0,"app-header"),t.TgZ(1,"div",0),t.TgZ(2,"div"),t.TgZ(3,"form",1),t._UZ(4,"br"),t.TgZ(5,"div",2),t.TgZ(6,"mat-form-field"),t.TgZ(7,"mat-label"),t._uU(8,"Nombre"),t.qZA(),t._UZ(9,"input",3,4),t.TgZ(11,"mat-hint",5),t._uU(12),t.qZA(),t.qZA(),t.TgZ(13,"mat-form-field"),t.TgZ(14,"mat-label"),t._uU(15,"Estado"),t.qZA(),t.TgZ(16,"mat-select",6),t.YNc(17,J,2,2,"mat-option",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",8),t.TgZ(19,"button",9),t.NdJ("click",function(){return a.clickEnviar()}),t._uU(20," Enviar "),t.qZA(),t.TgZ(21,"button",10),t.NdJ("click",function(){return a.onCancelar()}),t._uU(22," Cancelar "),t.qZA(),t.YNc(23,j,3,0,"button",11),t.qZA(),t.qZA(),t._UZ(24,"br"),t._UZ(25,"br"),t.qZA(),t.TgZ(26,"div",12),t.TgZ(27,"table",13),t.ynx(28,14),t.YNc(29,D,2,0,"th",15),t.YNc(30,Q,2,1,"td",16),t.BQk(),t.ynx(31,17),t.YNc(32,M,2,0,"th",15),t.YNc(33,w,2,1,"td",16),t.BQk(),t.ynx(34,18),t.YNc(35,F,2,0,"th",15),t.YNc(36,z,2,1,"td",16),t.BQk(),t.ynx(37,19),t.YNc(38,B,2,0,"th",15),t.YNc(39,H,5,0,"td",16),t.BQk(),t.YNc(40,I,1,0,"tr",20),t.YNc(41,R,1,0,"tr",21),t.qZA(),t._UZ(42,"mat-paginator",22),t.qZA(),t.qZA()),2&o){const c=t.MAs(10);t.xp6(3),t.Q6J("formGroup",a.form),t.xp6(9),t.hij("",c.value.length," / 45"),t.xp6(5),t.Q6J("ngForOf",a.lstEstCodigo),t.xp6(2),t.Q6J("disabled",!a.form.valid),t.xp6(4),t.Q6J("ngIf",a.editar),t.xp6(4),t.Q6J("dataSource",a.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(9,q))}},directives:[E.G,r._Y,r.JL,r.sg,C.xw,C.Wh,m.KE,m.hX,Z.Nt,r.Fj,r.JJ,r.u,r.nD,m.bx,v.gD,l.sg,T.lW,l.O5,s.BZ,s.w1,s.fO,s.Dz,s.as,s.nj,d.NW,Y.ey,b.Hw,s.ge,s.ev,s.XQ,s.Gk],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),e})()}];let O=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[f.Bz.forChild(G)],f.Bz]}),e})();var L=i(3356),W=i(5060);let $=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.ez,O,L.o9,r.UX,Z.c,m.lN,T.ot,b.Ps,v.LD,s.p0,d.TU,W.HeaderModule]]}),e})()}}]);